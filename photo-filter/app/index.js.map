{"version":3,"sources":["\\\\?\\D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1\\src\\lib\\types.ts","\\\\?\\D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1\\src\\lib\\dom-helpers.ts","\\\\?\\D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1\\src\\lib\\observer.ts","\\\\?\\D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1\\src\\components\\_filter-io.ts","\\\\?\\D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1\\src\\components\\_filters.ts","\\\\?\\D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1\\src\\components\\_editor.ts","\\\\?\\D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1\\src\\components\\_app.ts","D:\\dev\\rs-school\\fronte-finem-JSFE2021Q1/src/app/index.ts"],"sourcesContent":["export type CssVar = {\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\nexport type CssFilter = {\r\n  name: string;\r\n  value: number;\r\n  units: string;\r\n}\r\n\r\nexport type CssFilterName = string;\r\n\r\nexport type CssFilterValue = {\r\n  value: number;\r\n  units: string;\r\n}\r\n\r\nexport type CssFilters = Map<CssFilterName, CssFilterValue>\r\n\r\n\r\nexport abstract class ViewBEM {\r\n  static ViewName: string;\r\n\r\n  static bem(element?: string, modificator?: string | string[]): string {\r\n    const mods = Array.isArray(modificator) ? modificator : (modificator ? [modificator] : []);\r\n    const elem = element ? `${this.ViewName}__${element}` : this.ViewName;\r\n    return [elem, ...mods.map(mod => `${elem}--${mod}`)].join(' ');\r\n  }\r\n}\r\n\r\nexport class ImageLinksRoll {\r\n  static init = './assets/img/img.jpg';\r\n  static base = 'https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images';\r\n  static periods = ['night', 'morning', 'day', 'evening'];\r\n\r\n  counter: number;\r\n\r\n  constructor() {\r\n    this.counter = 0;\r\n  }\r\n\r\n  get init() { return ImageLinksRoll.init; }\r\n\r\n  next(date?: Date): string {\r\n    const num = String(1 + this.counter++ % 20).padStart(2, '0');\r\n    const i = Math.floor((date ?? new Date()).getHours() / 6);\r\n    const period = ImageLinksRoll.periods[i];\r\n    return `${ImageLinksRoll.base}/${period}/${num}.jpg`;\r\n  }\r\n}\r\n","import { CssFilters } from './types.js';\r\n\r\nexport const newDiv = (className: string) => newElem('div', className) as HTMLDivElement;\r\nexport const newBtn = (className: string) => newElem('button', className) as HTMLButtonElement;\r\nexport const newA = (className: string) => newElem('a', className) as HTMLAnchorElement;\r\n\r\nexport function newElem(tag: string, className: string): HTMLElement {\r\n  const elem = document.createElement(tag);\r\n  elem.className = className;\r\n  return elem;\r\n}\r\n\r\nexport function htmlToElem(template: string): HTMLElement {\r\n  const tmp = document.createElement('template');\r\n  tmp.innerHTML = template;\r\n  return tmp.content.firstElementChild as HTMLElement;\r\n}\r\n\r\nexport function newImg(className: string, src: string, alt: string = 'image'): HTMLImageElement {\r\n  const img = newElem('img', className) as HTMLImageElement;\r\n  img.setAttribute('crossOrigin', 'anonymous');\r\n  img.setAttribute('src', src);\r\n  img.setAttribute('alt', alt);\r\n  return img;\r\n}\r\n\r\nexport function loadImg(className: string, src: string, alt: string = 'image'): Promise<HTMLImageElement> {\r\n  return new Promise((resolve) => {\r\n    const img = newImg(className, src, alt);\r\n    img.addEventListener('load', () => resolve(img));\r\n  });\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob\r\n\r\nexport function saveImg(img: HTMLImageElement, filters: CssFilters) {\r\n  const canvas = drawImg(img, filters);\r\n\r\n  canvas.toBlob(function(blob) {\r\n    const uri = URL.createObjectURL(blob);\r\n\r\n    var link = document.createElement('a');\r\n    link.download = 'download.png';\r\n    link.href = uri;\r\n    link.click();\r\n    // ! ⚠️ prevent memory leak ⚠️\r\n    // no longer need to read the blob so it's revoked\r\n    URL.revokeObjectURL(uri);\r\n  });\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage#understanding_source_element_size\r\n\r\nexport function drawImg(img: HTMLImageElement, filters: CssFilters) {\r\n  const canvas = document.createElement('canvas');\r\n  const blur = filters['blur'].value;\r\n  const k = img.naturalWidth / img.width;\r\n  filters['blur'].value = Math.ceil(blur * k);\r\n  canvas.width = img.naturalWidth;\r\n  canvas.height = img.naturalHeight;\r\n  console.log(filters);\r\n  const ctx = canvas.getContext('2d');\r\n  const filtersString = Object.entries(filters)\r\n      .map(([name, {value, units}]) => `${name}(${value}${units})`).join(' ');\r\n  console.log(filtersString);\r\n  ctx.filter = filtersString;\r\n  ctx.drawImage(img, 0, 0);\r\n  return canvas;\r\n}\r\n","type Listeners = Record<string, Function[]>;\r\n\r\nclass Observer {\r\n  static singleton: Observer;\r\n  listeners: Listeners;\r\n\r\n  private constructor() {\r\n    this.listeners = {};\r\n    console.log(\"Observer constructor called!\", this);\r\n  }\r\n\r\n  public static getInstance(): Observer {\r\n    if (!Observer.singleton) {\r\n        Observer.singleton = new Observer();\r\n    }\r\n    return Observer.singleton;\r\n}\r\n\r\n  sub(type: string, handler: Function) {\r\n    this.listeners[type] || (this.listeners[type] = []);\r\n    this.listeners[type].push(handler);\r\n  }\r\n\r\n  unsub(type: string, handler: Function) {\r\n    if(!this.listeners[type]) return;\r\n    this.listeners[type] = this.listeners[type].filter(obs => obs !== handler);\r\n  }\r\n\r\n  fire(type: string, ...args: any[]) {\r\n    if(!this.listeners[type]) return;\r\n    this.listeners[type].forEach(handler => handler.apply(null, args));\r\n  }\r\n}\r\n\r\nexport const observer = Observer.getInstance();\r\n","import { htmlToElem, newElem, newDiv } from '../lib/dom-helpers.js';\r\nimport { observer } from '../lib/observer.js';\r\nimport { ViewBEM, CssVar, CssFilter } from '../lib/types.js';\r\n\r\nexport { FilterIO, FilterIOSettings };\r\n\r\nclass FilterIO extends ViewBEM  {\r\n  static ViewName = 'filter-io';\r\n\r\n  settings: FilterIOSettings;\r\n  view: HTMLDivElement;\r\n  input: HTMLInputElement;\r\n  output: HTMLOutputElement;\r\n\r\n  constructor(settings: FilterIOSettings) {\r\n    super();\r\n    this.settings = settings;\r\n\r\n    this.view = newDiv(FilterIO.ViewName);\r\n\r\n    this.input = htmlToElem(`\r\n      <input class=\"${FilterIO.bem('input')}\" type=\"range\" value=\"${settings.value}\" min=\"${settings.min}\" max=\"${settings.max}\">\r\n    `) as HTMLInputElement;\r\n\r\n    this.output = htmlToElem(`\r\n      <output class=\"${FilterIO.bem('output')}\" name=\"result\">${settings.value}</output>\r\n    `) as HTMLOutputElement;\r\n\r\n    const label = htmlToElem(`<label class=\"${FilterIO.bem('label')}\">${settings.prettyName}:</label>`);\r\n\r\n    label.append(this.input);\r\n    this.view.append(label, this.output);\r\n\r\n    observer.sub(`${FilterIO.ViewName}:reset`, () => observer.fire(`${this.settings.name}:reset`));\r\n\r\n    observer.sub(`${this.settings.name}:set`, (value: number) => {\r\n      this.output.value = String(value);\r\n      this.input.value = String(value);\r\n      observer.fire(FilterIO.ViewName, this.settings.cssVar);\r\n    });\r\n\r\n    this.input.addEventListener('input', () => {\r\n      observer.fire(`${this.settings.name}:new`, Number(this.input.value));\r\n    })\r\n  }\r\n}\r\n\r\nclass FilterIOSettings {\r\n  name: string;\r\n  initValue: number;\r\n  value: number;\r\n  min: number;\r\n  max: number;\r\n  units: string;\r\n\r\n  constructor(name: string, value: number, min: number, max: number, units: string) {\r\n    this.name = name.toLowerCase();\r\n    this.initValue = value;\r\n    this.value = value;\r\n    this.min = min;\r\n    this.max = max;\r\n    this.units = units;\r\n\r\n    observer.sub(`${this.name}:new`, (value: number) => {\r\n      this.value = value;\r\n      observer.fire(`${this.name}:set`, this.value);\r\n    });\r\n\r\n    observer.sub(`${this.name}:reset`, () => {\r\n      this.value = this.initValue;\r\n      observer.fire(`${this.name}:set`, this.value);\r\n    });\r\n  }\r\n\r\n  get prettyName() : string {\r\n    return `${this.name[0].toUpperCase()}${this.name.substring(1)}`;\r\n  }\r\n\r\n  get cssVar() : CssVar {\r\n    return {\r\n      name: `--${this.name}`,\r\n      value: `${this.value}${this.units}`\r\n    };\r\n  }\r\n\r\n  cssFilter() : CssFilter {\r\n    return {\r\n      name: this.name,\r\n      value: this.value,\r\n      units: this.units,\r\n    };\r\n  }\r\n}\r\n","import { newElem } from '../lib/dom-helpers.js';\r\nimport { observer } from '../lib/observer.js';\r\nimport { ViewBEM, CssVar, CssFilter, CssFilters } from '../lib/types.js';\r\nimport { FilterIO, FilterIOSettings } from './_filter-io.js';\r\n\r\nexport { Filters };\r\n\r\nclass Filters extends ViewBEM {\r\n  static ViewName = 'filters';\r\n\r\n  view: HTMLUListElement;\r\n\r\n  constructor (settings: FilterIOSettings[]) {\r\n    super();\r\n    this.view = newElem('ul', Filters.ViewName) as HTMLUListElement;\r\n    this.view.append(...settings.map(st => Filters.wrapper(new FilterIO(st).view)));\r\n\r\n    observer.sub(FilterIO.ViewName, (cssVar: CssVar) => observer.fire(Filters.ViewName, cssVar));\r\n\r\n    observer.sub(`${Filters.ViewName}:reset`, () => observer.fire(`${FilterIO.ViewName}:reset`));\r\n\r\n    observer.sub(`${Filters.ViewName}:save`, () => {\r\n      const filters = settings.reduce((acc: CssFilters, st: FilterIOSettings) => {\r\n        const cssFilter = st.cssFilter();\r\n        acc[cssFilter.name] = { value: cssFilter.value, units: cssFilter.units };\r\n        return acc;\r\n      }, {} as CssFilters);\r\n      observer.fire(`${Filters.ViewName}:filter`, filters);\r\n    });\r\n  }\r\n\r\n  static wrapper (el: HTMLElement): HTMLLIElement {\r\n    const li = newElem('li', Filters.bem('item')) as HTMLLIElement;\r\n    li.append(el);\r\n    return li;\r\n  }\r\n}\r\n","import { htmlToElem, newDiv, loadImg, saveImg } from '../lib/dom-helpers.js';\r\nimport { ViewBEM, ImageLinksRoll, CssFilters } from '../lib/types.js';\r\nimport { observer } from '../lib/observer.js';\r\nimport { resolve } from 'node:path';\r\n\r\nexport { Editor };\r\n\r\nclass Editor extends ViewBEM {\r\n  static ViewName = 'editor';\r\n\r\n  view: HTMLDivElement;\r\n  imgCont: HTMLDivElement;\r\n  img: HTMLImageElement;\r\n  imgLinkGen: ImageLinksRoll;\r\n  activeBtn: HTMLElement;\r\n\r\n  constructor() {\r\n    super();\r\n    this.imgLinkGen = new ImageLinksRoll();\r\n\r\n    this.view = newDiv(Editor.ViewName);\r\n    const btnCont = newDiv(Editor.bem('container', 'btn'));\r\n    this.imgCont = newDiv(Editor.bem('container', 'img'));\r\n    this.view.append(btnCont, this.imgCont);\r\n\r\n    btnCont.append(this.initBtnReset('Reset'),\r\n                   this.setActiveBtn(this.initBtnNext('Next picture')),\r\n                   this.initBtnLoad('Load picture'),\r\n                   this.initBtnSave('Save picture'));\r\n\r\n    this.initImg();\r\n  }\r\n\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications#example_using_object_urls_to_display_images\r\n\r\n  initBtnLoad(text: string) {\r\n    const btnLoad = htmlToElem(`<label class=\"btn btn-load\">${text}</label>`);\r\n    const btnLoadInput = htmlToElem(\r\n      `<input class=\"btn-load__input\" type=\"file\" name=\"upload\" placeholder=\"${text}\">`\r\n      ) as HTMLInputElement;\r\n    btnLoad.append(btnLoadInput);\r\n    btnLoadInput.addEventListener('input', async () => {\r\n      const src = URL.createObjectURL(btnLoadInput.files[0]);\r\n      await this.replaceImg(() => src);\r\n      btnLoadInput.value = '';\r\n      // ! ⚠️ prevent memory leak ⚠️\r\n      URL.revokeObjectURL(src);\r\n      this.setActiveBtn(btnLoad);\r\n    });\r\n    return btnLoad;\r\n  }\r\n\r\n  initBtnSave(text: string) {\r\n    const btnSave = htmlToElem(`<button class=\"btn btn-load\">${text}</button>`);\r\n    btnSave.addEventListener('click', () => observer.fire(`${Editor.ViewName}:save`));\r\n    observer.sub(`${Editor.ViewName}:filter`, (filters: CssFilters) => {\r\n      saveImg(this.img, filters);\r\n      this.setActiveBtn(btnSave);\r\n    });\r\n    return btnSave;\r\n  }\r\n\r\n  initBtnReset(text: string) {\r\n    const btnReset = htmlToElem(`<button class=\"btn btn-reset\">${text}</button>`);\r\n    btnReset.addEventListener('click', () => {\r\n      observer.fire(`${Editor.ViewName}:reset`);\r\n      this.setActiveBtn(btnReset);\r\n    });\r\n    return btnReset;\r\n  }\r\n\r\n  initBtnNext(text: string) {\r\n    const btnNext = htmlToElem(`<button class=\"btn btn-next\">${text}</button>`);\r\n    btnNext.addEventListener('click', () => {\r\n      this.replaceImg(() => this.imgLinkGen.next());\r\n      this.setActiveBtn(btnNext);\r\n    });\r\n    return btnNext;\r\n  }\r\n\r\n  setActiveBtn(btn: HTMLElement) {\r\n    if (btn === this.activeBtn) return;\r\n    this.activeBtn?.classList.remove('btn--active');\r\n    this.activeBtn = btn;\r\n    this.activeBtn.classList.add('btn--active');\r\n    return btn;\r\n  }\r\n\r\n  async initImg() {\r\n    this.img = await Editor.loadImg(this.imgLinkGen.init);\r\n    this.imgCont.append(this.img);\r\n  }\r\n\r\n  async replaceImg(getSrc: () => string) {\r\n    const newImg = await Editor.loadImg(getSrc());\r\n    this.imgCont.replaceChild(newImg, this.img);\r\n    this.img = newImg;\r\n  }\r\n\r\n  static loadImg(src: string, alt: string = 'image'): Promise<HTMLImageElement> {\r\n    return loadImg(Editor.bem('img'), src, alt);\r\n  }\r\n}\r\n","import { newElem, newDiv } from '../lib/dom-helpers.js';\r\nimport { observer } from '../lib/observer.js';\r\nimport { ViewBEM, CssVar, CssFilters } from '../lib/types.js';\r\nimport { FilterIOSettings } from './_filter-io.js';\r\nimport { Filters } from './_filters.js';\r\nimport { Editor } from './_editor.js';\r\n\r\nexport { App };\r\n\r\nclass App extends ViewBEM {\r\n  static ViewName = 'app';\r\n\r\n  view: HTMLElement;\r\n  editor: Editor;\r\n  filters: Filters;\r\n\r\n  constructor(filterIOSettings: FilterIOSettings[]) {\r\n    super();\r\n    this.view = newElem('main', `${App.ViewName} page__block`);\r\n    const filtersCont = newDiv(App.bem('container', 'filters'));\r\n    const editorCont = newDiv(App.bem('container', 'editor'));\r\n    this.view.append(filtersCont, editorCont);\r\n\r\n    this.editor = new Editor();\r\n    this.filters = new Filters(filterIOSettings);\r\n\r\n    editorCont.append(this.editor.view);\r\n    filtersCont.append(this.filters.view);\r\n\r\n    observer.sub(Filters.ViewName, (cssVar: CssVar) => this.view.style.setProperty(cssVar.name, cssVar.value));\r\n\r\n    observer.sub(`${Editor.ViewName}:reset`, () => observer.fire(`${Filters.ViewName}:reset`));\r\n\r\n    observer.sub(`${Editor.ViewName}:save`, () => observer.fire(`${Filters.ViewName}:save`));\r\n\r\n    observer.sub(`${Filters.ViewName}:filter`, (filters: CssFilters) => observer.fire(`${Editor.ViewName}:filter`, filters));\r\n  }\r\n}\r\n","import { newElem } from '../lib/dom-helpers.js';\r\nimport { observer } from '../lib/observer.js';\r\nimport { ViewBEM, ImageLinksRoll } from '../lib/types.js';\r\nimport { FilterIOSettings } from '../components/_filter-io.js';\r\nimport { App } from '../components/_app.js';\r\n\r\nwindow.addEventListener('load', (e) => {\r\n  initFullscreanBtn();\r\n  initThemeToggleBtn();\r\n\r\n  const appCont = document.querySelector('.page__container--app');\r\n\r\n  const filterIOViewSettings = [\r\n    new FilterIOSettings('blur', 0, 0, 10, 'px'),\r\n    new FilterIOSettings('invert', 0, 0, 100, '%'),\r\n    new FilterIOSettings('sepia', 0, 0, 100, '%'),\r\n    new FilterIOSettings('saturate', 100, 0, 200, '%'),\r\n    new FilterIOSettings('hue-rotate', 0, 0, 360, 'deg'),\r\n  ];\r\n\r\n  const app = new App(filterIOViewSettings);\r\n\r\n  appCont.append(app.view);\r\n\r\n  // testImageLinksRoll();\r\n\r\n  function testImageLinksRoll() {\r\n    const imageLinksRoll = new ImageLinksRoll();\r\n    for (let h=0; h<24; h++) {\r\n      for (let m=0; m<60; m++) {\r\n        const date = new Date(2021, 0, 0, h, m);\r\n        console.log(imageLinksRoll.next(date).replace(/.*images./, ''), date.toTimeString());\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nfunction initFullscreanBtn() {\r\n  const btn = document.querySelector('.btn-icon--fullscreen') as HTMLButtonElement;\r\n  btn.addEventListener('click', toggleFullScreen);\r\n}\r\n\r\nfunction toggleFullScreen() {\r\n  if (!document.fullscreenElement) {\r\n      document.documentElement.requestFullscreen();\r\n  } else {\r\n    document.exitFullscreen && document.exitFullscreen();\r\n  }\r\n}\r\n\r\nfunction initThemeToggleBtn() {\r\n  const toggle = {\r\n    'dark': {\r\n      theme: 'light',\r\n      page: {old: 'page--dark', new: 'page--light'},\r\n      btn: {old: 'btn-icon--theme-to-light', new: 'btn-icon--theme-to-dark'}\r\n    },\r\n    'light': {\r\n      theme: 'dark',\r\n      page: {old: 'page--light', new: 'page--dark'},\r\n      btn: {old: 'btn-icon--theme-to-dark', new: 'btn-icon--theme-to-light'}\r\n    },\r\n  };\r\n  const page = document.querySelector('.page') as HTMLElement;\r\n  const btn = document.querySelector('.btn-icon--theme') as HTMLButtonElement;\r\n  btn.addEventListener('click', () => {\r\n    const state = toggle[page.dataset.theme];\r\n    page.dataset.theme = state.theme;\r\n    page.classList.replace(state.page.old, state.page.new);\r\n    btn.classList.replace(state.btn.old, state.btn.new);\r\n  });\r\n}\r\n"],"names":[],"mappings":"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"}